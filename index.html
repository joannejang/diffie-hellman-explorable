<head>
	<title> Diffie-Hellman Key Exchange: An Explorable </title>
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
	<link href="css/main.css" rel="stylesheet">
	<!-- Plus by arjuazka from the Noun Project -->
	<!-- Equal by Eagle Eye from the Noun Project -->
</head>

<script src="js/jscolor/jscolor.js"></script>
<script src="js/color-mixing.js"></script>

<body>

	<div id="intro_container">
		<div id="title">
			<h1>
				Diffie-Hellman Key Exchange
			</h1>
		</div>
		<div id="subtitle">
			An Explorable Explanation by Joanne Jang, Clay Jones, Jessica Ouyang
		</div>
	</div>

	<div class="chapter">
		<h2> Introduction </h2>
		<p> [VERY general overview on encryption and key exchange] </p>
	</div>

	<div class="chapter">
		<h2> One-way Functions </h2>
		<p>
			<b> Unmixing paint is hard. </b>
		</p>
		Given a color, can you try to find its 2 comprising paint colors?

		<div class="interactive">
			<div id="goal">
				Goal Color:
				<p id="goal_color" style="border:1px solid gray; width:100px; height:100px; background-color: #d1adc2; margin-top: 20px;"/>

				</p>
			</div>

			<br/>
			<div id="color-wrapper">

				<div id="color1">
					<button
					    style="border:1px solid gray; font-family: 'Source Sans Pro', sans-serif; text-align: center; background-color: #3dc6a0;"> <!--  -->
					    Color 1
					</button>

					<p id="circ1" style="border:1px solid gray; width:100px; height:100px; background-color: #3dc6a0;"/>
				</div>
				<div class="crop">
					<img src="img/plus.svg"/>
				</div>

				<div id="color2">
					<button
					    class="jscolor {valueElement:null,value:'D3D3D3', onFineChange: 'updateCirc2(this)'}"
					    style="border:1px solid gray; font-family: 'Source Sans Pro', sans-serif; text-align: center;"><!--   -->
					    Color 2
					</button>

					<p id="circ2" style="border:1px solid gray; width:100px; height:100px;"/>
				</div>

				<div class="crop">
					<img src="img/equal.svg"/>
				</div>

				<div id="mixed">
				Mixed Color:
				<p id="mixed_color" style="border:1px solid gray; width:100px; height:100px; margin-top: 10px; margin-bottom: 20px;"/>

				</p>
			</div>
			</div>


<!-- 			<div id="mixed">
				Mixed Color:
				<p id="mixed_color" style="border:1px solid gray; width:100px; height:100px; margin-top: 20px; margin-bottom: 20px;"/>

				</p>
			</div> -->
			<div id="match">
				NOT A MATCH
			</div>
		</div>
		<p>
			... but if you knew the two colors, mixing them isn't hard.
		</p>

		<div class="visual">
			<div class="circle" style="background-color: yellow;"> </div>
			<div class="crop">
				<img src="img/plus.svg"/>
			</div>
			<div class="circle" style="background-color: blue;"> </div>
			<div class="crop">
				<img src="img/equal.svg"/>
			</div>
			<div class="circle" style="background-color: green;"> </div>
		</div>

	</div>
	<br/>

	<div class="chapter">
		<h2> Next Section </h2>
		<p> Cool. </p>
	</div>




</body>

<script>
		function updateCirc1(jscolor) {
			// console.log(jscolor);
		    // 'jscolor' instance can be used as a string
		    // document.getElementById('circ1').style.backgroundColor = '#' + jscolor;
		    // updateMixedColor(jscolor);
		}
		function updateCirc2(jscolor) {
			// console.log(jscolor);
		    // 'jscolor' instance can be used as a string
		    document.getElementById('circ2').style.backgroundColor = '#' + jscolor
		    updateMixedColor(jscolor);
		}

		function updateMixedColor(jscolor) {
			color1 = document.getElementById('circ1').style.backgroundColor;
			color2 = document.getElementById('circ2').style.backgroundColor;

			cmyk_color1 = RGBtoCMYK(color1);
			cmyk_color2 = RGBtoCMYK(color2);

			rgb_mixed_color = mixColors(cmyk_color1, cmyk_color2);
			console.log(rgb_mixed_color);

			document.getElementById('mixed_color').style.backgroundColor = rgb_mixed_color;	
		}

		function RGBtoCMYK(color) {
			rgb = color.substring(4, color.length-1)
         			.replace(/ /g, '')
         			.split(',');

			cyan    = 255 - rgb[0];
  			magenta = 255 - rgb[1];
  			yellow  = 255 - rgb[2];
  			black   = Math.min(cyan, magenta, yellow);
  			cyan    = ((cyan - black) / (255 - black));
  			magenta = ((magenta - black) / (255 - black));
  			yellow  = ((yellow  - black) / (255 - black));

  			return {c:cyan,m:magenta,y:yellow,k:black/255,a:50};
		}

		function CMYKtoRGB(color) {
		  color.c = color.c;
		  color.m = color.m;
		  color.y = color.y;
		  color.k = color.k;
		  R = color.c * (1.0 - color.k) + color.k;
		  G = color.m * (1.0 - color.k) + color.k;
		  B = color.y * (1.0 - color.k) + color.k;
		  R = Math.round((1.0 - R) * 255.0 + 0.5);
		  G = Math.round((1.0 - G) * 255.0 + 0.5);
		  B = Math.round((1.0 - B) * 255.0 + 0.5);
		  RGB_str = "rgb(" + R + "," + G + "," + B + ")"
		  return RGB_str;
		}
		function mixColors(color1, color2){
		  if(typeof(color1)=='object'&&(color1 instanceof Array)==false)
		    color1 = new Array(color1,color2);

		  C = 0;
		  M = 0;
		  Y = 0;
		  K = 0;
		  A = 0;
		  for(var i=0;i<color1.length;i++){
		    C += color1[i].c;
		    M += color1[i].m;
		    Y += color1[i].y;
		    K += color1[i].k;
		    A += color1[i].a;
		  }
		  C = C/color1.length;
		  M = M/color1.length;
		  Y = Y/color1.length;
		  K = K/color1.length;
		  A = A/color1.length;
		  color = {c:C,m:M,y:Y,k:K,a:A};
		  color = CMYKtoRGB(color);
		  return color;
		}
</script>